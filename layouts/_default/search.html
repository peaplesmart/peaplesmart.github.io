{{ define "main" }}
<section class="container mx-auto lg:max-w-7xl my-16 px-4">
  <h1 class="text-3xl font-bold text-slate-800 dark:text-slate-100 mb-6 text-center">
    üîç Pencarian Konten
  </h1>

  <!-- input -->
  <div class="max-w-3xl mx-auto px-4">
    <input
      id="search-input"
      type="text"
      placeholder="Cari artikel..."
      class="w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring focus:ring-teal-500 transition"
    />
  </div>

  <!-- results wrapper -->
  <div class="mt-10 max-w-3xl mx-auto space-y-4" id="search-results">
    <!-- Isi nanti diisi oleh JS -->
    <!-- Contoh template result:
    <div class="border-l-4 border-teal-500 bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow-sm hover:shadow transition">
      <a href="/some-article/" class="text-lg font-semibold text-slate-800 dark:text-slate-100 hover:text-teal-600 dark:hover:text-teal-400">
        Judul Artikel
      </a>
      <p class="text-slate-600 dark:text-slate-400 text-sm mt-1">Ringkasan konten...</p>
    </div>
    -->
  </div>
</section>

<!-- Tambah script -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const input = document.getElementById("search-input");
  const resultsList = document.getElementById("search-results");

  fetch("{{ "index.json" | relURL }}")
    .then(res => res.json())
    .then(data => {
      const fuse = new Fuse(data, {
        keys: ["title", "content"],
        includeScore: true,
        threshold: 0.3
      });

      input.addEventListener("input", () => {
        const keyword = input.value.trim();
        resultsList.innerHTML = "";

        if (!keyword) return;

        const results = fuse.search(keyword);
        if (results.length === 0) {
          resultsList.innerHTML = `
            <div class="mt-4 p-4 bg-slate-100 dark:bg-slate-700 rounded-lg text-slate-500 italic text-sm">
              Tidak ditemukan.
            </div>
          `;
          return;
        }

        results.forEach(({ item }) => {
          const resultItem = document.createElement("div"); // ‚úÖ PENTING
          resultItem.innerHTML = `
            <div class="search-card p-3 sm:p-4 bg-slate-50 dark:bg-slate-800 border-l-4 border-teal-500 rounded-md shadow hover:shadow-md transition">
              <a href="${item.permalink}" class="block text-slate-700 dark:text-slate-300 hover:underline">
                <h3 class="text-base sm:text-lg font-semibold mb-1">${item.title}</h3>
              </a>
            </div>
          `;
          resultsList.appendChild(resultItem);
        });
      });
    });
});
</script>

{{ end }}
